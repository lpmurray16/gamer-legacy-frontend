<header>
  <h1 class="logo">
    <span class="logo-text-desktop">GAMER LEGACY</span>
    <span class="logo-text-mobile">GL</span>
  </h1>

  <div class="header-right">
    @if (authService.isAuthenticated()) {
    <div class="notification-wrapper">
      <button class="notification-btn" (click)="toggleNotifications()" aria-label="Notifications">
        <img src="assets/bell_icon.png" alt="Notifications">
        @if (notificationService.notifications().length > 0) {
        <span class="badge">{{ notificationService.notifications().length }}</span>
        }
      </button>

      @if (isNotificationsOpen()) {
      <div class="notification-menu">
        <div class="notification-header">
          <h3>Notifications</h3>
          <button class="close-btn" (click)="closeNotifications()">×</button>
        </div>
        <div class="notification-list">
          @for (note of notificationService.notifications(); track note.id) {
          <div class="notification-item">
            <div class="notification-content">
              <div class="note-title">{{ note['title'] }}</div>
              <div class="note-message">{{ note['message'] }}</div>
              <div class="note-date">{{ note['date_sent'] | date:'short' }}</div>
            </div>
            <button class="dismiss-btn" (click)="dismiss(note.id, $event)" aria-label="Dismiss">×</button>
          </div>
          }
          @if (notificationService.notifications().length === 0) {
          <div class="notification-empty">No new notifications</div>
          }
        </div>
      </div>
      }
    </div>
    }

    <button class="hamburger" (click)="toggleMenu()" aria-label="Toggle navigation">
      ☰
    </button>
  </div>

  <nav [class.open]="isMenuOpen()">
    <a routerLink="/home" routerLinkActive="active" (click)="closeMenu()">DASHBOARD</a>
    <a routerLink="/explore" routerLinkActive="active" (click)="closeMenu()">EXPLORE</a>
    <a routerLink="/top-games" routerLinkActive="active" (click)="closeMenu()">TOP 30</a>
    @if (authService.isAuthenticated()) {
    <a class="btn btn-secondary btn-sm" (click)="logout()">LOGOUT</a>
    }
  </nav>

</header>

<main>
  <router-outlet />
</main>