<div class="container">
  <div class="card header-card">
    <h2>> DASHBOARD: {{ authService.currentUser()?.['name'] || 'PLAYER' }}</h2>
    <div class="user-info">
      <span class="id-badge">ID: {{ authService.currentUser()?.id }}</span>
      <button class="btn btn-secondary btn-sm" (click)="logout()">LOGOUT</button>
    </div>
  </div>

  @if (loading()) {
  <div class="loading">> SYNCING DATABASE...</div>
  } @else {
  <div class="dashboard-grid">
    <!-- PLAYING COLUMN -->
    <div class="column">
      <h3 class="col-header playing">> ACTIVE QUESTS ({{ playing().length }})</h3>
      <div class="game-list">
        @if (playing().length === 0) {
        <div class="empty-state">NO ACTIVE MISSIONS</div>
        }
        @for (game of playing(); track game.id) {
        <div class="mini-card" (click)="openGame(game)">
          <img [src]="game['game_image']" alt="cover">
          <div class="mini-info">
            <h4>{{ game['game_name'] }}</h4>
            <button (click)="$event.stopPropagation(); removeGame(game.id)" class="btn-remove">x</button>
          </div>
        </div>
        }
      </div>
    </div>

    <!-- WATCHING COLUMN -->
    <div class="column">
      <h3 class="col-header watching">> WATCHLIST ({{ watching().length }})</h3>
      <div class="game-list">
        @if (watching().length === 0) {
        <div class="empty-state">NO INTEL GATHERED</div>
        }
        @for (game of watching(); track game.id) {
        <div class="mini-card" (click)="openGame(game)">
          <img [src]="game['game_image']" alt="cover">
          <div class="mini-info">
            <h4>{{ game['game_name'] }}</h4>
            <button (click)="$event.stopPropagation(); removeGame(game.id)" class="btn-remove">x</button>
          </div>
        </div>
        }
      </div>
    </div>

    <!-- PLAYED COLUMN -->
    <div class="column">
      <h3 class="col-header played">> COMPLETED ({{ played().length }})</h3>
      <div class="game-list">
        @if (played().length === 0) {
        <div class="empty-state">ARCHIVES EMPTY</div>
        }
        @for (game of played(); track game.id) {
        <div class="mini-card" (click)="openGame(game)">
          <img [src]="game['game_image']" alt="cover">
          <div class="mini-info">
            <h4>{{ game['game_name'] }}</h4>
            <button (click)="$event.stopPropagation(); removeGame(game.id)" class="btn-remove">x</button>
          </div>
        </div>
        }
      </div>
    </div>
  </div>
  }

  <div class="actions-footer">
    <button class="btn btn-lg" (click)="goToExplore()">
      > FIND NEW MISSIONS
    </button>
    <button class="btn btn-lg" (click)="goToTopGames()">
      > MANAGE TOP 30
    </button>
  </div>

  @if (selectedGameId()) {
  <app-game-detail-modal [gameId]="selectedGameId()!" (close)="closeModal()" />
  }
</div>